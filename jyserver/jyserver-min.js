"undefined"===typeof UID&&(UID="COOKIE");"undefined"===typeof PAGEID&&(PAGEID="COOKIE");
function evalBrowser(){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status)try{eval(a.responseText),setTimeout(evalBrowser,1)}catch(b){console.log("ERROR",b.message),setTimeout(function(){sendErrorToServer(a.responseText,b.message);evalBrowser()},1)}};a.open("POST","/_process_srv0");a.setRequestHeader("Content-Type","application/json;charset=UTF-8");a.send(JSON.stringify({session:PAGEID,task:"next"}))}
function sendFromBrowserToServer(a,b){var c="";try{var f=eval(a)}catch(e){f=0,c=e.message+": '"+a+"'",console.log("ERROR",b,c)}a=new XMLHttpRequest;a.open("POST","/_process_srv0");a.setRequestHeader("Content-Type","application/json;charset=UTF-8");a.send(JSON.stringify({session:PAGEID,task:"state",value:f,query:b,error:c}))}
function sendErrorToServer(a,b){var c=new XMLHttpRequest;c.open("POST","/_process_srv0");c.setRequestHeader("Content-Type","application/json;charset=UTF-8");c.send(JSON.stringify({session:PAGEID,task:"error",error:b,expr:a}))}function closeBrowserWindow(){var a=new XMLHttpRequest;a.open("POST","/_process_srv0");a.setRequestHeader("Content-Type","application/json;charset=UTF-8");a.send(JSON.stringify({session:PAGEID,task:"unload"}))}
server=new Proxy({},{get:function(a,b){return function(a){for(var c=[],e=0;e<arguments.length;++e)c[e-0]=arguments[e];var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status&&(result=JSON.parse(d.responseText),"error"in result))throw console.log("ERROR async: ",b,d.responseText),result.error;};d.open("POST","/_process_srv0");d.setRequestHeader("Content-Type","application/json;charset=UTF-8");d.send(JSON.stringify({session:PAGEID,task:"async","function":b,args:c}))}}});
function handleApp(a,b){var c=new XMLHttpRequest;c.open("POST","/_process_srv0",!1);c.setRequestHeader("Content-Type","application/json;charset=UTF-8");c.send(JSON.stringify({session:PAGEID,task:"run",block:!0,"function":a,args:b}));if(200===c.status){a=JSON.parse(c.responseText);if("error"in a)throw console.log("ERROR",a.error),a.error;return"expression"==a.type?eval(a.expression):a.value}}
function handleAppProperty(a){var b=new XMLHttpRequest;b.open("POST","/_process_srv0",!1);b.setRequestHeader("Content-Type","application/json;charset=UTF-8");b.send(JSON.stringify({session:PAGEID,task:"get",block:!0,expression:a}));if(200===b.status){a=JSON.parse(b.responseText);if("error"in a)throw console.log("ERROR",a.error),a.error;return"expression"==a.type?eval(a.expression):a.value}}
function handleAppSetProperty(a,b){var c=new XMLHttpRequest;c.open("POST","/_process_srv0",!1);c.setRequestHeader("Content-Type","application/json;charset=UTF-8");c.send(JSON.stringify({session:PAGEID,task:"set",property:a,value:b}));return b}app=new Proxy({},{get:function(a,b){return handleAppProperty(b)},set:function(a,b,c){return handleAppSetProperty(b,c)}});window.addEventListener("beforeunload",function(a){closeBrowserWindow()});window.addEventListener("load",function(a){evalBrowser()});
